<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by perltidy on Sun Aug 28 16:44:41 2022 -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>patternword.pl</title>
<link rel="stylesheet" href="chu.css" type="text/css" /></head>
<body>
<a name="-top-"></a>
<h1>patternword.pl</h1>
<!-- BEGIN CODE INDEX --><a name="code-index"></a>
<ul>
<li><a href="#patternword-">package main</a>
<ul>
<li><a href="#patternword-">patternword</a></li>
</ul>
</li>
<li><a href="#EOF-">EOF</a></li>
</ul>
<!-- END CODE INDEX -->
<hr />
<!-- contents of filename: patternword.pl -->
<pre>
   1 #! perl
   2 
   3 <span class="k">require</span> <span class="v">v5.10.0</span><span class="sc">;</span>
   4 <span class="k">use</span> <span class="w">strict</span><span class="sc">;</span>
   5 
   6 <span class="k">our</span> <span class="i">%Tests</span><span class="sc">;</span>
   7 <span class="k">BEGIN</span><span class="s">{</span> <span class="c"># initialize early so Test More can see count</span>
   8  <span class="i">%Tests</span> = <span class="s">(</span>
   9 	<span class="q">&quot;counterfeiters&quot;</span> 	<span class="cm">=&gt;</span><span class="q">&quot;ABCDEFGHFIEFGJ&quot;</span><span class="cm">,</span> 
  10 	<span class="q">&quot;environmental&quot;</span>		<span class="cm">=&gt;</span><span class="q">&quot;ABCDEFBGABHIJ&quot;</span><span class="cm">,</span>
  11 	<span class="q">&quot;environ-mental&quot;</span>	<span class="cm">=&gt;</span><span class="q">&quot;ABCDEFBGABHIJ&quot;</span><span class="cm">,</span>
  12 	<span class="s">)</span><span class="sc">;</span>
  13 <span class="s">}</span>
  14 <span class="k">sub </span><span class="m">patternword</span><span class="sc">;</span>
  15 	
  16 <span class="k">my</span> <span class="i">$debug</span>=<span class="n">0</span><span class="sc">;</span> 
  17 <span class="k">if</span> <span class="s">(</span><span class="i">$debug</span><span class="s">)</span><span class="s">{</span>
  18 <span class="c">#	use Test::More tests=&gt; scalar(keys(%Tests));</span>
  19 <span class="c">#	while (my($k,$v)=each(%Tests)){is(patternword($k),$v);}</span>
  20 <span class="s">}</span>
  21 
<a name="patternword-"></a>  22 <span class="k">sub </span><span class="m">patternword</span> <span class="s">{</span> 
  23 	<span class="k">my</span> <span class="i">$w</span>= <span class="k">shift</span><span class="sc">;</span> <span class="c"># word</span>
  24 	<span class="c"># my $A= split &#39;&#39;,$w; # comb in p6</span>
  25 	<span class="c"># my %pos = map {($A[$_] =&gt; $_)} 0..$</span>
  26 	<span class="k">warn</span> <span class="q">&quot;&lt;$w\n&quot;</span> <span class="k">if</span> <span class="i">$debug</span><span class="sc">;</span>
  27 	<span class="i">$w</span> =~ <span class="q">tr/a-zA-Z//cd</span><span class="sc">;</span> <span class="c"># alpha only. </span>
  28 	<span class="k">warn</span> <span class="q">&quot;&gt;$w\n&quot;</span> <span class="k">if</span> <span class="i">$debug</span><span class="sc">;</span>
  29 	<span class="c"># dedup</span>
  30 	<span class="k">my</span> <span class="i">$letters</span> = <span class="k">lc</span> <span class="i">$w</span><span class="sc">;</span> 
  31 	<span class="k">warn</span> <span class="q">&quot;&gt;$letters\n&quot;</span>  <span class="k">if</span> <span class="i">$debug</span><span class="sc">;</span>
  32 	<span class="n">1</span> <span class="k">while</span> <span class="i">$letters</span> =~ <span class="q">s/(.).*\K\1//g</span><span class="sc">;</span>
  33 	<span class="k">warn</span> <span class="q">&quot;&gt;$letters\n&quot;</span>  <span class="k">if</span> <span class="i">$debug</span><span class="sc">;</span>
  34 	
  35 	 <span class="k">eval</span> <span class="q">&quot; tr/$letters/A-Z/, 1&quot;</span> <span class="k">for</span> <span class="i">$w</span><span class="sc">;</span>
  36 	 <span class="k">die</span> <span class="q">&quot;$@ : tr/$letters/A-Z/&quot;</span> <span class="k">if</span> <span class="i">$@</span><span class="sc">;</span> <span class="c"># exception to eval rule ! </span>
  37 	<span class="k">warn</span> <span class="q">&quot;=&gt;$w\n&quot;</span>  <span class="k">if</span> <span class="i">$debug</span><span class="sc">;</span>
  38 	 <span class="k">return</span> <span class="i">$w</span><span class="sc">;</span>
  39 	<span class="s">}</span>
  40 
  41 <span class="k">my</span> <span class="s">(</span>	<span class="i">$duckword</span><span class="cm">,</span> <span class="i">$n</span><span class="s">)</span><span class="sc">;</span>
  42 
  43 <span class="k">if</span> <span class="s">(</span><span class="q">&#39;--find&#39;</span> <span class="k">eq</span> <span class="i">$ARGV</span>[<span class="n">0</span>]<span class="s">)</span>
  44 <span class="s">{</span>
  45 	<span class="k">shift</span><span class="sc">;</span>
  46 	<span class="i">$duckword</span>=<span class="i">patternword</span><span class="s">(</span><span class="k">lc</span> <span class="k">shift</span><span class="s">)</span><span class="sc">;</span>
  47 	<span class="i">$n</span>=<span class="k">length</span><span class="s">(</span><span class="i">$duckword</span><span class="s">)</span><span class="sc">;</span>
  48 	<span class="k">warn</span> <span class="q">&quot;searching for $duckword $n\n&quot;</span><span class="sc">;</span>
  49 <span class="s">}</span>
  50 	
  51 	<span class="k">return</span> <span class="k">if</span> <span class="i">$debug</span><span class="sc">;</span>
  52 	
  53 <span class="k">while</span> <span class="s">(</span>&lt;&gt;<span class="s">)</span> <span class="s">{</span>
  54 	<span class="k">chop</span> <span class="k">while</span> <span class="q">/\s$/</span><span class="sc">;</span> <span class="c"># tolerate DOS, UNIX, MAC anywhere</span>
  55 	<span class="k">next</span> <span class="k">if</span> <span class="q">/^\s*#/</span><span class="sc">;</span> <span class="c"># skip comments</span>
  56 	<span class="k">next</span> <span class="k">unless</span> ! <span class="k">defined</span> <span class="i">$n</span> <span class="k">or</span> <span class="i">$n</span> == <span class="k">length</span><span class="sc">;</span>
  57 	<span class="k">my</span> <span class="i">$pw</span>=<span class="i">patternword</span><span class="s">(</span><span class="i">$_</span><span class="s">)</span><span class="sc">;</span>
  58 	
  59 	<span class="k">print</span> <span class="q">&quot;$.\t$_\n&quot;</span> <span class="k">if</span> <span class="k">defined</span> <span class="i">$duckword</span> <span class="k">and</span> <span class="i">$pw</span>  <span class="k">eq</span> <span class="i">$duckword</span><span class="sc">;</span>
  60 	<span class="k">printf</span>  <span class="q">&quot;%s\t%s\n%s\t%s\n&quot;</span><span class="cm">,</span>
  61 		<span class="k">lc</span> <span class="i">$_</span><span class="cm">,</span> <span class="i">$pw</span><span class="cm">,</span> <span class="c"># LC so alphabetizes at plaintext</span>
  62 		   <span class="i">$pw</span><span class="cm">,</span> <span class="i">$_</span>   <span class="c"># leave propernouns uppercase when column 2</span>
  63 		<span class="k">unless</span> <span class="k">defined</span> <span class="i">$duckword</span><span class="sc">;</span> 
  64 <span class="s">}</span> <span class="k">continue</span> <span class="s">{</span>
  65 	<span class="k">close</span> <span class="w">ARGV</span> <span class="k">if</span> <span class="k">eof</span><span class="sc">;</span> <span class="c"># Not eof()!</span>
  66 <span class="s">}</span>
<a name="EOF-"></a></pre>
</body>
</html>
