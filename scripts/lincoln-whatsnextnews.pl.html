<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by perltidy on Fri May 17 12:18:51 2024 -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>lincoln-whatsnextnews.pl</title>
<link rel="stylesheet" href="style.css" type="text/css" /></head>
<body>
<a name="-top-"></a>
<h1>lincoln-whatsnextnews.pl</h1>
<!-- BEGIN CODE INDEX --><a name="code-index"></a>
<ul>
<li><a href="#title-">package main</a>
<ul>
<li><a href="#title-">title</a></li>
<li><a href="#show-">show</a></li>
<li><a href="#zip-">zip</a></li>
<li><a href="#_partition-">_partition</a></li>
<li><a href="#_blinds-">_blinds</a></li>
<li><a href="#_route-">_route</a></li>
<li><a href="#_abitraries-">_abitraries</a></li>
</ul>
</li>
<li><a href="#__DATA__-">__DATA__</a></li>
<li><a href="#EOF-">EOF</a></li>
</ul>
<!-- END CODE INDEX -->
<hr />
<!-- contents of filename: lincoln-whatsnextnews.pl -->
<pre>
#! perl
<span class="c"># Decode a telegram sent by Pres.A.Lincoln</span>
<span class="c"># The settings included here were in effect on the day</span>
<span class="c"># of telegram, but other settings and possibly different </span>
<span class="c"># instructions on other days</span>
<span class="c"># a full-purpose program would need to load a full set </span>
<span class="c"># of &#39;current&#39; settings </span>

<span class="c"># Demonstration based upon</span>
<span class="c"># &ldquo;Anatomy of a Cipher&rdquo; Daniel W. Stowell</span>
<span class="c"># https://web.archive.org/web/20160628222057/http://www.c3teachers.org/wp-content/uploads/2016/01/Anatomy-of-a-Cipher.pdf</span>
<span class="c"># ref. from </span>
<span class="c"># Smithsonian/Zooniverse/ Huntington Library Citizen science initiative</span>
<span class="c"># Decoding the Civil War</span>
<span class="c"># to transcribe Lincoln&#39;s war telegrams</span>
<span class="c"># http://www.smithsonianmag.com/smart-news/you-can-help-decode-thousands-top-secret-civil-war-telegrams-180959561/</span>
<span class="c"># https://www.zooniverse.org/projects/zooniverse/decoding-the-civil-war</span>
<span class="c"># https://www.zooniverse.org/projects/zooniverse/decoding-the-civil-war/about/education</span>
<span class="c"># https://blog.decodingthecivilwar.org/</span>
<span class="c"># https://web.archive.org/web/20160628222057/http://www.c3teachers.org/wp-content/uploads/2016/01/Anatomy-of-a-Cipher.pdf</span>
<span class="c"># See also </span>
<span class="c"># https://archive.org/search.php?query=Plum%2C%20William%20Rattle</span>
<span class="c"># The Military Telegraph during the Civil War in the United States</span>

<span class="k">use</span> <span class="n">5.022</span><span class="sc">;</span>
<span class="k">use</span> <span class="w">warnings</span><span class="sc">;</span>
<span class="k">use</span> <span class="w">strict</span><span class="sc">;</span>
<span class="k">use</span> <span class="w">List::MoreUtils</span> <span class="q">qw{part none }</span><span class="sc">;</span>
<span class="k">use</span> <span class="w">List::Util</span> <span class="q">qw{sum}</span><span class="sc">;</span>
<span class="k">use</span> <span class="w">feature</span> <span class="q">&#39;postderef&#39;</span><span class="sc">;</span> <span class="c">#5.020; </span>
<span class="k">no</span> <span class="w">warnings</span> <span class="q">&#39;experimental::postderef&#39;</span><span class="sc">;</span>
 <span class="k">use</span> <span class="w">feature</span> <span class="q">&#39;signatures&#39;</span> <span class="sc">;</span> <span class="c">#5.020; </span>
<span class="k">no</span> <span class="w">warnings</span> <span class="q">&#39;experimental::signatures&#39;</span><span class="sc">;</span>

<span class="c"># set up</span>
<span class="k">my</span> <span class="i">%BlindVal</span>=<span class="i">_blinds</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
<span class="k">my</span> <span class="i">%Arbitraries</span>=<span class="i">_abitraries</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>

<span class="c"># load </span>
<a name="title-"></a><span class="k">sub </span><span class="m">title</span><span class="s">(</span><span class="i">$l</span><span class="s">)</span>
<span class="s">{</span> <span class="k">state</span> <span class="i">$i</span>=<span class="n">0</span><span class="sc">;</span> <span class="i">$i</span>++<span class="sc">;</span> <span class="k">say</span> <span class="q">&quot;\n-------\n[$i. $l]\n&quot;</span><span class="sc">;</span> <span class="sc">;</span> 
<span class="s">}</span>

<span class="i">title</span> <span class="q">&#39;transcribe as received&#39;</span><span class="sc">;</span>

<span class="k">my</span> <span class="i">@words</span><span class="sc">;</span>
<span class="k">while</span><span class="s">(</span><span class="q">&lt;DATA&gt;</span><span class="s">)</span><span class="s">{</span>
   <span class="k">chomp</span><span class="sc">;</span>
  <span class="k">say</span> <span class="i">$_</span><span class="sc">;</span> 
  <span class="k">push</span> <span class="i">@words</span><span class="cm">,</span><span class="i">$_</span> <span class="k">for</span> <span class="k">split</span> <span class="q">/\s+/</span><span class="sc">;</span>
<span class="s">}</span>

<span class="i">title</span> <span class="q">&#39;just words&#39;</span><span class="sc">;</span>
<span class="k">say</span> <span class="k">join</span> <span class="q">q( )</span><span class="cm">,</span> <span class="i">@words</span><span class="sc">;</span>

<span class="c"># Remove blinds</span>
<span class="i">title</span> <span class="q">&#39;remove and interpret Commencement Blinds&#39;</span><span class="sc">;</span>
<span class="k">my</span> <span class="i">@blinds</span><span class="sc">;</span>
<span class="k">push</span> <span class="i">@blinds</span><span class="cm">,</span> <span class="k">uc</span><span class="s">(</span><span class="k">shift</span> <span class="i">@words</span><span class="s">)</span> <span class="k">for</span> <span class="n">1</span>..<span class="n">3</span><span class="sc">;</span>
<span class="k">say</span> <span class="k">join</span> <span class="q">q( )</span><span class="cm">,</span>  <span class="i">@blinds</span><span class="sc">;</span>
<span class="k">my</span> <span class="i">@n</span>=<span class="i">@BlindVal</span>{<span class="i">@blinds</span>}<span class="sc">;</span>
<span class="k">say</span> <span class="k">join</span> <span class="q">q( )</span><span class="cm">,</span> <span class="i">@n</span><span class="sc">;</span>
<span class="k">my</span> <span class="i">$cols</span>=<span class="k">shift</span> <span class="i">@n</span><span class="sc">;</span>
<span class="k">my</span> <span class="i">$lines</span>=<span class="w">sum</span> <span class="i">@n</span><span class="sc">;</span>
<span class="k">say</span> <span class="q">&quot;$cols columns; @n rows = &quot;</span><span class="cm">,</span> <span class="i">$lines</span> <span class="sc">;</span>
<span class="k">my</span> <span class="i">@route</span>   = <span class="i">_route</span><span class="s">(</span><span class="i">$blinds</span>[<span class="n">0</span>]<span class="cm">,</span><span class="q">&#39;enc&#39;</span><span class="s">)</span><span class="sc">;</span>
<span class="k">my</span> <span class="i">@unroute</span> = <span class="i">_route</span><span class="s">(</span><span class="i">$blinds</span>[<span class="n">0</span>]<span class="cm">,</span><span class="q">&#39;dec&#39;</span><span class="s">)</span><span class="sc">;</span>
<span class="k">say</span> <span class="q">&#39;  ROUTE: &#39;</span><span class="cm">,</span><span class="k">join</span> <span class="q">q/ /</span><span class="cm">,</span><span class="k">map</span> <span class="k">sprintf</span><span class="s">(</span><span class="q">&#39;%3d&#39;</span><span class="cm">,</span><span class="i">$_</span><span class="s">)</span><span class="cm">,</span><span class="i">@route</span><span class="sc">;</span>
<span class="k">say</span> <span class="q">&#39;  count: &#39;</span><span class="cm">,</span><span class="k">join</span> <span class="q">q/ /</span><span class="cm">,</span><span class="k">map</span> <span class="k">sprintf</span><span class="s">(</span><span class="q">&#39;%3d&#39;</span><span class="cm">,</span><span class="i">$_</span><span class="s">)</span><span class="cm">,</span><span class="n">1</span>..<span class="i">$cols</span><span class="sc">;</span>

<span class="k">say</span> <span class="q">&#39;unROUTE: &#39;</span><span class="cm">,</span><span class="k">join</span> <span class="q">q/ /</span><span class="cm">,</span><span class="k">map</span> <span class="k">sprintf</span><span class="s">(</span><span class="q">&#39;%3d&#39;</span><span class="cm">,</span><span class="i">$_</span><span class="s">)</span><span class="cm">,</span><span class="i">@unroute</span><span class="sc">;</span>

<span class="i">title</span> <span class="q">&#39;break into columns&#39;</span><span class="sc">;</span>
<span class="k">my</span> <span class="i">@columns</span> = <span class="i">_partition</span><span class="s">(</span><span class="i">$lines</span>+<span class="n">1</span><span class="cm">,</span>\<span class="i">@words</span><span class="s">)</span><span class="sc">;</span>
<span class="i">show</span><span class="s">(</span><span class="q">&#39;C&#39;</span><span class="cm">,</span>\<span class="i">@columns</span><span class="cm">,</span>\<span class="i">@route</span><span class="s">)</span><span class="sc">;</span>

<span class="i">title</span> <span class="q">&#39;remove column check blinds&#39;</span><span class="sc">;</span>
<span class="k">my</span> <span class="i">@col_check</span>=<span class="k">map</span><span class="s">{</span><span class="k">uc</span> <span class="k">pop</span> <span class="i">@$_</span><span class="s">}</span> <span class="i">@columns</span><span class="sc">;</span>
<span class="i">show</span><span class="s">(</span><span class="q">&#39;C&#39;</span><span class="cm">,</span>\<span class="i">@columns</span><span class="cm">,</span>\<span class="i">@route</span><span class="s">)</span><span class="sc">;</span>
<span class="k">say</span> <span class="q">&quot;col checks @col_check&quot;</span><span class="sc">;</span>

<span class="i">title</span> <span class="q">&#39;un-reverse reversed columns&#39;</span><span class="sc">;</span>
<span class="k">for</span> <span class="k">my</span> <span class="i">$i</span> <span class="s">(</span><span class="n">0</span>..<span class="i">$cols</span>-<span class="n">1</span><span class="s">)</span><span class="s">{</span>
	<span class="k">my</span> <span class="i">$col</span>=<span class="i">$i</span>+<span class="n">1</span><span class="sc">;</span>
	<span class="k">next</span> <span class="k">if</span> <span class="i">$route</span>[<span class="i">$i</span>] &gt; <span class="n">0</span><span class="sc">;</span> 
	<span class="i">$columns</span>[<span class="i">$i</span>] = <span class="s">[</span> <span class="k">reverse</span> <span class="i">$columns</span>[<span class="i">$i</span>]<span class="i">-&gt;@*</span> <span class="s">]</span><span class="sc">;</span>
	<span class="i">$route</span>[<span class="i">$i</span>] *= <span class="n">-1</span> <span class="sc">;</span> 
<span class="s">}</span><span class="sc">;</span>

<span class="i">show</span><span class="s">(</span><span class="q">&#39;C&#39;</span><span class="cm">,</span>\<span class="i">@columns</span><span class="cm">,</span>\<span class="i">@route</span><span class="s">)</span><span class="sc">;</span>

<span class="i">title</span> <span class="q">&#39;unscramble lines&#39;</span><span class="sc">;</span>
<span class="k">my</span> <span class="i">@lines</span> = <span class="i">zip</span><span class="s">(</span> <span class="s">[</span> <span class="i">@columns</span>[<span class="k">map</span> <span class="s">{</span><span class="s">(</span><span class="i">$_</span>-<span class="n">1</span><span class="s">)</span><span class="s">}</span><span class="i">@unroute</span>] <span class="s">]</span>  <span class="s">)</span><span class="sc">;</span>

<span class="i">show</span><span class="s">(</span><span class="q">&#39;L&#39;</span><span class="cm">,</span>\<span class="i">@lines</span><span class="s">)</span><span class="sc">;</span>

<span class="i">title</span> <span class="q">&#39;replace Arbitraries &#39;</span><span class="sc">;</span>
<span class="k">for</span> <span class="k">my</span> <span class="i">$l</span> <span class="s">(</span><span class="i">@lines</span><span class="s">)</span><span class="s">{</span>
	<span class="k">for</span> <span class="k">my</span> <span class="i">$w</span> <span class="s">(</span><span class="i">$l</span><span class="i">-&gt;@*</span><span class="s">)</span><span class="s">{</span>
		<span class="k">next</span> <span class="k">unless</span> <span class="i">$Arbitraries</span>{<span class="k">lc</span> <span class="i">$w</span>}<span class="sc">;</span>
		<span class="i">$w</span> = <span class="q">&quot;/$Arbitraries{lc $w}/&quot;</span><span class="sc">;</span>
	<span class="s">}</span>
<span class="s">}</span>
<span class="i">show</span><span class="s">(</span><span class="q">&#39;L&#39;</span><span class="cm">,</span>\<span class="i">@lines</span><span class="s">)</span><span class="sc">;</span>

<span class="k">exit</span><span class="sc">;</span>

<span class="c">#####################</span>
<span class="c"># subs</span>

<span class="c"># show array</span>
<a name="show-"></a><span class="k">sub </span><span class="m">show</span><span class="s">(</span><span class="i">$prefix</span><span class="cm">,</span><span class="i">$aref</span><span class="cm">,</span><span class="i">$labelsref</span> = <span class="k">undef</span> <span class="s">)</span><span class="s">{</span>
	<span class="k">my</span> <span class="i">$i</span>=<span class="n">0</span><span class="sc">;</span>
	<span class="k">say</span> <span class="k">sprintf</span><span class="s">(</span><span class="q">&#39;%s%3s(%2d):%s&#39;</span><span class="cm">,</span><span class="i">$prefix</span><span class="cm">,</span><span class="s">(</span><span class="i">$labelsref</span>?<span class="i">$labelsref</span>-&gt;[<span class="i">$i</span>]<span class="co">:</span><span class="q">&#39;&#39;</span><span class="s">)</span><span class="cm">,</span>++<span class="i">$i</span><span class="cm">,</span><span class="k">join</span><span class="s">(</span><span class="q">q/  /</span><span class="cm">,</span><span class="i">$_</span><span class="i">-&gt;@*</span><span class="s">)</span><span class="s">)</span>   
		<span class="k">for</span> <span class="i">$aref</span><span class="i">-&gt;@*</span><span class="sc">;</span>
   <span class="s">}</span>

<span class="c"># zip </span>
<span class="c"># like List::Util::zip but takes arrayref of arrayref </span>
<span class="c"># destructive, not copying. sinful ! </span>
<a name="zip-"></a><span class="k">sub </span><span class="m">zip</span><span class="s">(</span><span class="i">$arrays</span><span class="s">)</span><span class="s">{</span>
	<span class="k">my</span> <span class="i">@ret_array</span><span class="sc">;</span>
	<span class="k">while</span> <span class="s">(</span><span class="n">1</span><span class="s">)</span><span class="s">{</span>
		
		<span class="k">my</span> <span class="i">@slice</span>=  <span class="k">map</span> <span class="s">{</span><span class="s">(</span><span class="k">shift</span> <span class="i">$_</span><span class="i">-&gt;@*</span> // <span class="q">&#39;&#39;</span> <span class="s">)</span><span class="s">}</span> <span class="i">$arrays</span><span class="i">-&gt;@*</span> <span class="sc">;</span> 
		<span class="c"># say &quot;Z: @slice&quot;;</span>
		<span class="k">last</span> <span class="k">if</span> <span class="k">none</span><span class="s">{</span>  <span class="i">$_</span> <span class="s">}</span> <span class="i">@slice</span><span class="sc">;</span>
		<span class="k">push</span> <span class="i">@ret_array</span><span class="cm">,</span><span class="s">[</span><span class="i">@slice</span><span class="s">]</span><span class="sc">;</span>
  	<span class="s">}</span>
	<span class="k">return</span> <span class="i">@ret_array</span><span class="sc">;</span>
<span class="s">}</span>

<span class="c"># partition into lists of length N</span>
<span class="c"># uses List::MoreUtils::part </span>
<span class="c"># relies on part being order preserving </span>
<span class="c"># </span>
<a name="_partition-"></a><span class="k">sub </span><span class="m">_partition</span> <span class="s">{</span>
  <span class="k">my</span> <span class="s">(</span><span class="i">$n</span><span class="cm">,</span> <span class="i">$aref</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
  <span class="k">my</span> <span class="i">$i</span> = <span class="n">0</span><span class="sc">;</span> 
  <span class="k">my</span> <span class="i">@part</span> = <span class="i">part</span> <span class="s">{</span> <span class="k">int</span><span class="s">(</span><span class="i">$i</span>++ / <span class="i">$n</span><span class="s">)</span> <span class="s">}</span> <span class="i">$aref</span><span class="i">-&gt;@*</span><span class="sc">;</span>  
<span class="s">}</span>
<span class="c">############</span>
<span class="c"># setup</span>
<a name="_blinds-"></a><span class="k">sub </span><span class="m">_blinds</span><span class="s">{</span><span class="k">return</span> <span class="s">(</span><span class="w">WHATS</span><span class="cm">=&gt;</span><span class="n">10</span><span class="cm">,</span> <span class="w">NEXT</span><span class="cm">=&gt;</span><span class="n">9</span><span class="cm">,</span> <span class="w">NEWS</span><span class="cm">=&gt;</span><span class="n">2</span><span class="s">)</span><span class="s">}</span>

<a name="_route-"></a><span class="k">sub </span><span class="m">_route</span><span class="s">(</span><span class="i">$BLIND</span><span class="cm">,</span><span class="i">$encdec</span><span class="s">)</span><span class="s">{</span> <span class="c">#5.022 experimental::signatures  </span>
   <span class="c"># routes here are ONE based. Decrement to uses in indices.</span>
   <span class="k">my</span> <span class="i">%code</span> = <span class="s">(</span> <span class="w">WHATS</span><span class="cm">=&gt;</span> <span class="s">{</span>
	<span class="q">&#39;enc&#39;</span><span class="cm">=&gt;</span><span class="s">[</span><span class="n">6</span><span class="cm">,</span> <span class="n">10</span><span class="cm">,</span> <span class="n">-1</span><span class="cm">,</span> <span class="n">8</span><span class="cm">,</span> <span class="n">-2</span><span class="cm">,</span> <span class="n">4</span><span class="cm">,</span> <span class="n">-7</span><span class="cm">,</span> <span class="n">3</span><span class="cm">,</span> <span class="n">-5</span><span class="cm">,</span> <span class="n">9</span><span class="s">]</span><span class="cm">,</span> <span class="c">#WHATS ENCODE</span>
               <span class="c">#1   2   3  4   5  6   7  8   9 10</span>
	<span class="q">&#39;dec&#39;</span><span class="cm">=&gt;</span><span class="s">[</span><span class="n">3</span><span class="cm">,</span>  <span class="n">5</span><span class="cm">,</span>  <span class="n">8</span><span class="cm">,</span> <span class="n">6</span><span class="cm">,</span>  <span class="n">9</span><span class="cm">,</span> <span class="n">1</span><span class="cm">,</span>  <span class="n">7</span><span class="cm">,</span> <span class="n">4</span><span class="cm">,</span> <span class="n">10</span><span class="cm">,</span> <span class="n">2</span><span class="s">]</span><span class="cm">,</span> <span class="c">#WHATS DECODE</span>
	<span class="s">}</span><span class="s">)</span><span class="sc">;</span>
  <span class="k">return</span> <span class="i">$code</span>{<span class="i">$BLIND</span>}-&gt;{<span class="i">$encdec</span>}<span class="i">-&gt;@*</span><span class="sc">;</span>
<span class="s">}</span>

<span class="c">###############</span>
<span class="c"># miniture Nomenclator or codebook of &#39;Arbitraries&#39; aka codeword replacements</span>
<span class="c"># (  just enough for this message )</span>
<a name="_abitraries-"></a><span class="k">sub </span><span class="m">_abitraries</span><span class="s">{</span>
<span class="k">return</span> <span class="s">(</span> 
 <span class="w">bologne</span> <span class="cm">=&gt;</span><span class="q">&#39;Pres of U.S.&#39;</span><span class="cm">,</span>
 <span class="w">emma</span> <span class="cm">=&gt;</span> <span class="q">&#39;9am&#39;</span><span class="cm">,</span> <span class="w">flood</span><span class="cm">=&gt;</span><span class="q">&#39;12&#39;</span><span class="cm">,</span> 
 <span class="w">galway</span><span class="cm">=&gt;</span><span class="q">&#39;Richmond&#39;</span><span class="cm">,</span>
 <span class="w">paradise</span> <span class="cm">=&gt;</span> <span class="q">&#39;Col.&#39;</span> <span class="cm">,</span> 
 <span class="w">pekin</span> <span class="cm">=&gt;</span> <span class="q">q(,)</span><span class="cm">,</span>  <span class="w">pedlar</span> <span class="cm">=&gt;</span> <span class="q">q(,)</span><span class="cm">,</span> 
 <span class="w">shelter</span><span class="cm">=&gt;</span> <span class="q">&#39;Genl.&#39;</span> <span class="cm">,</span> 
 <span class="w">star</span> <span class="cm">=&gt;</span> <span class="q">q(?)</span><span class="cm">,</span>
 <span class="w">toby</span> <span class="cm">=&gt;</span> <span class="q">q(to be)</span><span class="cm">,</span>  <span class="c"># homonym pun, not really in book but toby transliterated by hand</span>
 <span class="w">torch</span> <span class="cm">=&gt;</span> <span class="q">q(of the)</span><span class="cm">,</span>
 <span class="w">unity</span> <span class="cm">=&gt;</span> <span class="q">q(.)</span><span class="cm">,</span> 
<span class="c"># &#39;my&#39; =&gt; &#39;by&#39;, # presume copy error ? </span>
 <span class="w">walnut</span> <span class="cm">=&gt;</span><span class="q">&#39;Rebel&#39;</span><span class="cm">,</span> 
 <span class="w">yoke</span> <span class="cm">=&gt;</span> <span class="q">&#39;signed&#39;</span><span class="cm">,</span>
 <span class="w">zebra</span><span class="cm">=&gt;</span> <span class="q">q(.)</span><span class="cm">,</span> <span class="w">zodiac</span><span class="cm">=&gt;</span> <span class="q">q(.)</span><span class="cm">,</span>
<span class="s">)</span><span class="s">}</span>

<a name="__DATA__-"></a><span class="k">__DATA__</span>
<span class="q">Whats next news I the prayers I to while coming star</span>
<span class="q">what you you mean dispatch zebra I you spirit there</span>
<span class="q">understanding any if the piloted your offer there such of</span>
<span class="q">any and have was I to Emma never seen of of no toby</span>
<span class="q">Zodiac on there is with what remains yoke as sign my</span>
<span class="q">sign temper acted in to paradise flood over weitzel abe</span>
<span class="q">remember pekin that my walnut to form such why not</span>
<span class="q">say may it if together there you have spoken matter have</span>
<span class="q">senses shelter bardie not galway in manifested torch</span>
<span class="q">letter in no bologne plenty dont sign me you legislature</span>
<span class="q">me appeared but bearing out unity in your prayers</span>
<span class="q">while doubt the is the is pedlar draw you down</span>
<a name="EOF-"></a></pre>
</body>
</html>
